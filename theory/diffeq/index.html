<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Differential Equations · SaunaModel.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SaunaModel.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Theory</span><ul><li><a class="toctext" href="../overview/">Overview</a></li><li><a class="toctext" href="../heat_transfer/">Heat Transfer</a></li><li class="current"><a class="toctext" href>Differential Equations</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#Relations-used-1">Relations used</a></li></ul></li><li><a class="toctext" href="../human/">Human Heating</a></li></ul></li><li><span class="toctext">Use</span><ul><li><a class="toctext" href="../../use/guide/">Guide</a></li><li><a class="toctext" href="../../use/api/">API</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Theory</li><li><a href>Differential Equations</a></li></ul><a class="edit-page" href="https://github.com/bhalonen/SaunaModel.jl/blob/master/src/theory/diffeq.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Differential Equations</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Differential-Equations-1" href="#Differential-Equations-1">Differential Equations</a></h1><p>SaunaModel relies on the excellent <a href="https://docs.juliadiffeq.org/latest/">DifferentialEquations.jl</a> to solve the sauna state. One particular challenge of modelling a sauna is the jump condition of throwing steam. DifferentialEquations handled it beautifully with a <code>VariableRateJump</code> problem. The ordinary differential equation part of the problem is described in <code>build_sauna_model</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SaunaModel.build_sauna_model" href="#SaunaModel.build_sauna_model"><code>SaunaModel.build_sauna_model</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>build_sauna_model(du, u, scenario, raw_time)</code> describes how the system evolves smoothly through time (not including steam throwing) This is fed to the ODESolver of Differential Equations. The first argument is the derivative, and must be updated to match how the system is evolving. There are many interactions, driven by radiance, convection, conduction, advection, and phase change.</p></div></div><a class="source-link" target="_blank" href="https://github.com/bhalonen/SaunaModel.jl/blob/f73e9e339148aa92426e3dabf2498fbb8b704fac/src/SaunaModel.jl#L37-L41">source</a></section><p>The jump problem posed by steam throwing is handled by <code>throw_steam!</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SaunaModel.throw_steam!" href="#SaunaModel.throw_steam!"><code>SaunaModel.throw_steam!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>throw_steam!(integrator)</code> gets its argument integerator from DifferentialEquations It updates the current mass of water that is on the stove, and adjusts the average temperature of water on the stove accordingly.</p></div></div><a class="source-link" target="_blank" href="https://github.com/bhalonen/SaunaModel.jl/blob/f73e9e339148aa92426e3dabf2498fbb8b704fac/src/solve_sauna.jl#L46-L49">source</a></section><p>The rate of steam throwing is determined by <code>steam_throwing</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SaunaModel.steam_throwing" href="#SaunaModel.steam_throwing"><code>SaunaModel.steam_throwing</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p><code>steam_throwing(u,p,t)</code> u, p, and t are inputs from the Differential Equations solver. u is the state, p is the solution  paramenters, and t is the time.  The steam throwing rate is determined by if the experinced temperature is higher than the cutoff to start taking steam. </p></div></div><a class="source-link" target="_blank" href="https://github.com/bhalonen/SaunaModel.jl/blob/f73e9e339148aa92426e3dabf2498fbb8b704fac/src/solve_sauna.jl#L4-L8">source</a></section><h1><a class="nav-anchor" id="Relations-used-1" href="#Relations-used-1">Relations used</a></h1><p>There are 6 differential equations modelling sauna dynamics. 4 of them are temperature (stove, air, room, thrown water), 1 of them is room humidity, and 1 is the mass of unboiled water that was thrown on the stove. There is also a jump step, which causes steam to be thrown. The mass of water suddenly increases on the stove, and rebalances the average temperature of the thrown water.</p><table><tr><th style="text-align: center">Interaction</th><th style="text-align: center">Fire</th><th style="text-align: center">Stove</th><th style="text-align: center">Air</th><th style="text-align: center">Room</th><th style="text-align: center">Thrown water</th><th style="text-align: center">Human  (not interacting)</th></tr><tr><td style="text-align: center">Fire</td><td style="text-align: center">-</td><td style="text-align: center">Convection and</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr><tr><td style="text-align: center">Radiation</td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center"></td><td style="text-align: center"></td></tr><tr><td style="text-align: center">Stove</td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center">Convection</td><td style="text-align: center">Radiation</td><td style="text-align: center">Convection</td><td style="text-align: center">Radiation</td></tr><tr><td style="text-align: center">Air</td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center"></td><td style="text-align: center">Convection</td><td style="text-align: center">Phase Change</td><td style="text-align: center">Convection Phase Change</td></tr><tr><td style="text-align: center">Room</td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center"></td><td style="text-align: center">-</td><td style="text-align: center">-</td><td style="text-align: center">Radiation</td></tr></table><footer><hr/><a class="previous" href="../heat_transfer/"><span class="direction">Previous</span><span class="title">Heat Transfer</span></a><a class="next" href="../human/"><span class="direction">Next</span><span class="title">Human Heating</span></a></footer></article></body></html>
